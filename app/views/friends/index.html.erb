<h1 class="mt-3 pb-2">Friends List</h1>
<form class="my-2 my-lg-0 text-center friendlist">
      <%= link_to "Add friend", profiles_path, class: "search-input btn-white" %>
</form>
<div class="friendlist">
  <h2 class="mt-3 mb-3">Challenge your friends</h2>
  <div class="row">
    <% @my_friends.each do |friend| %>
      <div class="col-4 <%= "opacity-avatar" if @friends.find{|f|f.friend1_user == friend || f.friend2_user == friend }.status == "pending"  %>">
        <%= link_to new_friend_challengeset_path(friend) do %>
        <%= cl_image_tag friend.photo.key, :transformation=>[
        {:width=>400, :height=>400, :gravity=>"face", :radius=>"max", :crop=>"crop"},
        {:width=>200, :crop=>"scale"}
        ], class: "avatar-friend-list"%>
        <div class="friend-name"><%= friend.nickname %></div>
        <% end %>
        <% if @friends.find{|f| f.friend2_user == current_user }.status == "pending" %>
          <%= link_to "Validated friend", validated_friend_path(@friends.find{|f|f.friend1_user == friend || f.friend2_user == friend }), method: :patch  %>
          <%= link_to "Refused friend", refused_friend_path(@friends.find{|f| f.friend2_user == current_user }), method: :patch  %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
